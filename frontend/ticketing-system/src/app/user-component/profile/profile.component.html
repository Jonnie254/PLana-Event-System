<section class="mt-2">
    <div *ngIf="loginSuccess"
        class="fixed bottom-4 right-4 z-40 bg-green-500 text-white font-semibold tracking-wide flex items-center w-max max-w-sm p-4 rounded-md shadow-md shadow-green-200 m-4 animate-slideIn"
        role="alert">
        <i class="pi pi-check-circle mr-2"></i>
        <span class="block sm:inline text-sm mr-3">{{loginMessage}}</span>
        <i class="pi pi-times-circle cursor-pointer" (click)="loginSuccess = false"></i>
    </div>
    <div *ngIf="loginError"
        class="fixed bottom-4 right-4 z-40 bg-red-500 text-white font-semibold tracking-wide flex items-center w-max max-w-sm p-4 rounded-md shadow-md shadow-red-200 m-4 animate-slideIn"
        role="alert">
        <i class="pi pi-exclamation-triangle mr-2"></i>
        <span class="block sm:inline text-sm mr-3">{{loginMessage}}</span>
        <i class="pi pi-times-circle cursor-pointer" (click)="loginError = false"></i>
    </div>
    <div
        class="max-w-screen-xl flex-wrap mx-auto p-2 h-20 bg-gradient-to-r from-blue-200 via-white to-red-200 flex items-center justify-end pr-4 rounded-md">
        <button
            class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-xl flex items-center gap-2"
            (click)="isEditMode ? onSave() : toggleEditMode()">
            <i class="pi pi-pencil" *ngIf="!isEditMode"></i>
            {{ buttonText }}
        </button>
        <button *ngIf="isEditMode"
            class="bg-gray-500 hover:bg-gray-600 ml-2 text-white font-semibold py-2 px-4 rounded-xl flex items-center gap-2"
            (click)="toggleEditMode()">
            Cancel
        </button>
    </div>
</section>
<section class="flex flex-col max-w-screen-xl mx-auto bg-white p-2">
    <div class="flex items-center">
        <img [src]="user.profileImage ? user.profileImage : 'profilepic.svg'" alt="Profile Picture"
            class="h-16 w-16 rounded-full">
        <div class="ml-4">
            <h3 class="text-2xl font-semibold">{{ user.firstname }} {{ user.lastname }}</h3>
            <p class="text-gray-500">
                <i class="pi pi-envelope p-2"></i>
                {{ user.email }}
            </p>
        </div>
    </div>
    <form class="mt-2 p-4" [formGroup]="updateForm">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="space-y-2">
                <label for="firstName" class="block text-sm font-medium text-gray-700">First Name</label>
                <input type="text" id="firstName" name="firstName" placeholder="Your First Name"
                    formControlName="firstName" [readonly]="!isEditMode"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                <p *ngIf="f['firstName'].errors && f['firstName'].touched" class="text-red-500 text-xs italic mt-2">
                    First Name is required</p>
            </div>
            <div class="space-y-2">
                <label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label>
                <input type="text" id="lastName" name="lastName" placeholder="Your Last Name" formControlName="lastName"
                    [readonly]="!isEditMode"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                <p *ngIf="f['lastName'].errors && f['lastName'].touched" class="text-red-500 text-xs italic mt-2">Last
                    Name is required</p>
            </div>
            <div class="space-y-2">
                <label for="phone" class="block text-sm font-medium text-gray-700">Phone</label>
                <input type="text" id="phone" name="phone" placeholder="Your Phone Number" formControlName="phone"
                    [readonly]="!isEditMode"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                <p *ngIf="f['phone'].errors && f['phone'].touched" class="text-red-500 text-xs italic mt-2">Phone is
                    required</p>
            </div>
            <div class="space-y-2">
                <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                <input type="password" id="password" name="password" placeholder="Your Password"
                    formControlName="password" [readonly]="!isEditMode"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                <p *ngIf="f['password'].errors && f['password'].touched && isEditMode"
                    class="text-red-500 text-xs italic mt-2">Password is required</p>
            </div>
            <div class="space-y-2">
                <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                <input type="text" id="email" name="email" placeholder="Confirm Password" formControlName="email"
                    [readonly]="!isEditMode"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                <p *ngIf="f['email'].errors && f['email'].touched" class="text-red-500 text-xs italic mt-2">Email is
                    required</p>
            </div>
            <div class="space-y-2">
                <label class="block mb-2 mt-2 text-sm font-medium text-gray-900 dark:text-white"
                    for="user_avatar">Upload file</label>
                <input
                    class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"
                    (change)="getImagesUrl($event)" aria-describedby="user_avatar_help" id="user_avatar" type="file">
                <div *ngIf="spinnerVisible" class="flex items-center justify-center">
                    <i class="pi pi-spin pi-spinner" style="font-size: 1.2rem; color: blue; margin: 2px;"></i>
                </div>
            </div>
        </div>
    </form>
</section>